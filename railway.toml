# Railway – Recharge Customer Portal
# https://docs.railway.com/reference/config-as-code
# בכל deploy הטבלאות נוצרות/מתעדכנות אוטומטית (migrate --force).

[build]
builder = "NIXPACKS"
# buildCommand = "composer install --no-dev --optimize-autoloader && npm ci && npm run build"

[deploy]
# Pre-deploy: cache להגדרות (חייב APP_KEY)
preDeployCommand = "php artisan config:cache"
# Start: סקריפט שעושה config cache + migrate + serve (משתמש ב-PORT של Railway)
startCommand = "sh railway-start.sh"
